continue refactoring
write WALDIFFReader
add test functions
check memory leaks